<% if @chat_history != nil %>
  <% @chat_history.each do |msg| %>
    <% if msg["role"] == "user"  %>
      <dt>You:</dt>
      <dd><%= msg["content"]  %></dd>
    <% end %>
    <% if msg["role"] == "assistant"  %>
      <dt>Assistant:</dt>
      <dd><%= msg["content"].gsub("\n", "<br>") %></dd>
    <% end %>
  <% end %>
<% end %>

<form action="/add_message_to_chat" method="post">
  <label for="new_message_field">You:</label>
  
  <input id="new_message" type="text" name="user_message" placeholder="Enter a message....">

  <button>Send</button>
</form>

<hr>
<form action="/clear_chat" method="post">
  <button>Clear chat history</button>
</form>
